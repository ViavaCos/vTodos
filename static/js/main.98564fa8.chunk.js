(this.webpackJsonpvtodos=this.webpackJsonpvtodos||[]).push([[0],{19:function(t,e,n){},20:function(t,e,n){},22:function(t,e,n){},23:function(t,e,n){},25:function(t,e,n){},26:function(t,e,n){},27:function(t,e,n){},28:function(t,e,n){},38:function(t,e){},40:function(t,e,n){"use strict";n.r(e);var i=n(2),a=n.n(i),s=n(8),c=n.n(s),o=(n(19),n(20),n(1)),r=n.n(o),d=n(7),l=n(3),u=n(4),h=n(6),p=n(5),v=(n(22),n(23),n(0)),b=function(t){Object(h.a)(n,t);var e=Object(p.a)(n);function n(){var t;return Object(l.a)(this,n),(t=e.call(this)).state={isEdit:!1,penddingContent:""},t}return Object(u.a)(n,[{key:"changeItemStatus",value:function(t){t||this.setState({isEdit:!this.state.isEdit})}},{key:"makeAsFinished",value:function(){this.props.parent.makeAsFinished(this.props.data.id)}},{key:"delToDoItem",value:function(){this.props.parent.delToDo(this.props.data.id)}},{key:"changeTodoContent",value:function(){this.state.penddingContent&&this.state.penddingContent.trim()?(this.props.parent.changeTodo(this.props.data.id,this.state.penddingContent),this.setState({isEdit:!1,penddingContent:""})):this.setState({isEdit:!1})}},{key:"handleContentChange",value:function(t){this.setState({penddingContent:t.nativeEvent.target.value})}},{key:"render",value:function(){var t=this.props.data;return this.state.isEdit?Object(v.jsxs)("div",{className:"todos-item todos-item-edit",children:[Object(v.jsx)("input",{className:"edit-content",defaultValue:t.content,type:"text",onBlur:this.handleContentChange.bind(this)}),Object(v.jsx)("button",{className:"solve-icon",onClick:this.changeTodoContent.bind(this),children:"\ud83d\udcbe"}),Object(v.jsx)("button",{className:"close-icon",title:"\u53d6\u6d88",onClick:this.changeItemStatus.bind(this,0),children:"x"})]}):Object(v.jsxs)("div",{className:"todos-item "+(t.is_finish?"is-finish":""),title:"\u70b9\u51fb\u8fdb\u884c\u7f16\u8f91",children:[Object(v.jsx)("div",{className:"item-content",onClick:this.changeItemStatus.bind(this,t.is_finish),children:t.content}),Object(v.jsx)("button",{className:"solve-icon",title:t.is_finish?"\u6807\u8bb0\u4e3a\u672a\u5b8c\u6210":"\u6807\u8bb0\u4e3a\u5df2\u5b8c\u6210",onClick:this.makeAsFinished.bind(this),children:t.is_finish?"\u2611":"\u2610"}),Object(v.jsx)("button",{className:"close-icon",title:"\u5220\u9664",onClick:this.delToDoItem.bind(this),children:"x"})]})}}]),n}(i.Component);n(25),n(26);var f=function(t){window.electron&&window.electron.ipcRenderer.send(t)},j=(n(27),function(t){Object(h.a)(n,t);var e=Object(p.a)(n);function n(){var t;return Object(l.a)(this,n),(t=e.call(this)).state={},t}return Object(u.a)(n,[{key:"handleSearch",value:function(t){(0,this.props.getDatas)(t.target.value.trim())}},{key:"render",value:function(){return Object(v.jsxs)("div",{className:"search-wrap",children:[Object(v.jsx)("div",{className:"search-icon"}),Object(v.jsx)("input",{className:"search-body",placeholder:"\u8f93\u5165\u5173\u952e\u5b57\u641c\u7d22",onChange:this.handleSearch.bind(this)})]})}}]),n}(i.Component)),m=function(t){Object(h.a)(n,t);var e=Object(p.a)(n);function n(){var t;return Object(l.a)(this,n),(t=e.call(this)).state={isDesktop:void 0!==window.electron},t}return Object(u.a)(n,[{key:"handleClose",value:function(){f("close-app")}},{key:"handleMiNiSize",value:function(){f("min-app")}},{key:"renderDesktopOperation",value:function(){return this.state.isDesktop?Object(v.jsxs)("div",{className:"operation",children:[Object(v.jsx)("div",{className:"mini-btn",title:"\u6700\u5c0f\u5316",onClick:this.handleMiNiSize.bind(this),children:"-"}),Object(v.jsx)("div",{className:"close-btn",title:"\u5173\u95ed",onClick:this.handleClose.bind(this),children:"\u2717"})]}):""}},{key:"render",value:function(){var t=this.props.getDatas,e=function(){t()};return Object(v.jsxs)("div",{className:"todos-header",children:[Object(v.jsx)("div",{className:"starry"}),Object(v.jsx)("div",{className:"todos-logo viavacos",onClick:e}),Object(v.jsxs)("p",{className:"todos-title",onClick:e,children:["\u5fae\u571f\u8c46",Object(v.jsx)("span",{className:"version",children:this.state.isDesktop?"pc":"web"})]}),Object(v.jsx)("div",{className:"search",children:Object(v.jsx)(j,{getDatas:t})}),Object(v.jsxs)("div",{className:"user-info",children:[Object(v.jsx)("div",{className:"head-icon",style:{backgroundImage:"url('https://i0.hdslb.com/bfs/bangumi/image/b8e260e70e4c14621f96ec5c45a31db707ea41ed.png@87w_88h_1c_100q.webp')"}}),Object(v.jsx)("div",{className:"user-name",children:Object(v.jsx)("span",{children:"\u4f60\u7684\u6635\u79f0"})})]}),this.renderDesktopOperation()]})}}]),n}(i.Component),g=(n(28),function(){function t(){Object(l.a)(this,t),this.id=0,this.dialogWrap=null}return Object(u.a)(t,[{key:"construector",value:function(){var t=document.getElementsByClassName("my-dialog")||[],e=t.length?t[t.length-1].getAttribute("data-id"):0;this.id=e?+e+1:1}},{key:"open",value:function(t){var e=document.getElementById("my-dialog-wrap");e?this.dialogWrap=e:(this.dialogWrap=document.createElement("div"),this.dialogWrap.setAttribute("id","my-dialog-wrap"),document.body.append(this.dialogWrap));var n=Object(v.jsxs)("div",{className:"my-dialog","data-id":this.id,children:[Object(v.jsx)("div",{className:"my-dialog-title",children:"\u786e\u8ba4\u5f39\u7a97"}),Object(v.jsx)("div",{className:"my-dialog-content",children:"\u662f\u5426\u786e\u5b9a\u5220\u9664?"}),Object(v.jsxs)("div",{className:"my-dialog-operation",children:[Object(v.jsx)("div",{className:"cancel",onClick:this.close.bind(this),children:"\u53d6\u6d88"}),Object(v.jsx)("div",{className:"confirm",onClick:this.confirm.bind(this,t),children:"\u786e\u5b9a"})]})]});Object(s.render)(n,this.dialogWrap)}},{key:"close",value:function(){var t;null===(t=this.dialogWrap)||void 0===t||t.remove()}},{key:"confirm",value:function(t){t&&t(),this.close()}},{key:"cancel",value:function(){this.close()}}]),t}()),x=n(14),O=n.n(x);var k=function(t,e,n){var i={method:t.toUpperCase()};if(["POST","DELETE"].includes(i.method)&&(i.headers={"Content-Type":"application/x-www-form-urlencoded"},i.body=O.a.stringify(n)),["GET"].includes(i.method)){var a="";for(var s in n)a+=s+"="+n[s]+"&";a=a.substring(0,a.length-1),e+="?"+a}return new Promise((function(t,n){fetch(e,i).then((function(e){t(e.json())})).catch((function(t){n(t)}))}))},y="http://101.37.87.30:3001",C=function(t){return k("get",y+"/getTodosList",t)},N=new g,w=function(t){Object(h.a)(n,t);var e=Object(p.a)(n);function n(){var t;return Object(l.a)(this,n),(t=e.call(this)).state={todoData:[{id:1,content:"test1",is_finish:0},{id:2,content:"test2",is_finish:1},{id:3,content:"test3",is_finish:0}],paddingAddedText:"",showLoading:!1,debounceFlag:null},t}return Object(u.a)(n,[{key:"makeAsFinished",value:function(t){var e=this,n=this.state.todoData;n.forEach(function(){var i=Object(d.a)(r.a.mark((function i(a,s){return r.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(a.id!==t){i.next=7;break}return i.next=3,c={id:a.id,is_finish:1===n[s].is_finish?0:1},k("post",y+"/finishTodo",c);case 3:if(200===i.sent.code){i.next=6;break}return i.abrupt("return");case 6:e.getDataList();case 7:case"end":return i.stop()}var c}),i)})));return function(t,e){return i.apply(this,arguments)}}())}},{key:"delToDo",value:function(t){var e=this;N.open((function(){e.state.todoData.forEach(function(){var n=Object(d.a)(r.a.mark((function n(i,a){var s;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i.id!==t){n.next=6;break}return n.next=3,k("delete",y+"/deleteTodo",{id:t});case 3:s=n.sent,console.log(s),e.getDataList();case 6:case"end":return n.stop()}}),n)})));return function(t,e){return n.apply(this,arguments)}}())}))}},{key:"addToDo",value:function(){var t=Object(d.a)(r.a.mark((function t(e){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k("post",y+"/addTodo",{content:e});case 2:n=t.sent,console.log(n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"changeTodo",value:function(t,e){var n=this,i=this.state.todoData;i.forEach(function(){var a=Object(d.a)(r.a.mark((function a(s,c){var o;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(s.id!==t){a.next=7;break}return i[c].content=e,a.next=4,r={id:s.id,content:s.content},k("post",y+"/updateTodo",r);case 4:o=a.sent,console.log(o),n.getDataList();case 7:case"end":return a.stop()}var r}),a)})));return function(t,e){return a.apply(this,arguments)}}())}},{key:"handleTextChange",value:function(t){this.setState({paddingAddedText:t.nativeEvent.target.value})}},{key:"handleApply",value:function(){var t=Object(d.a)(r.a.mark((function t(){var e;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((e=this.state.paddingAddedText)&&e.trim()){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,this.addToDo(e);case 5:this.setState({paddingAddedText:""}),document.getElementsByClassName("operation-input")[0].value="",this.getDataList();case 8:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getDataList",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.setState({showLoading:!0}),this.state.debounceFlag&&clearTimeout(this.state.debounceFlag);var n=setTimeout(Object(d.a)(r.a.mark((function n(){var i;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,C({keywords:e});case 2:200===(i=n.sent).code&&t.setState({showLoading:!1,todoData:i.data});case 4:case"end":return n.stop()}}),n)}))),300);this.setState({debounceFlag:n})}},{key:"toChild",value:function(t){var e=this;return function(t){e.getDataList(t)}}},{key:"componentDidMount",value:function(){this.getDataList()}},{key:"render",value:function(){var t=this;return Object(v.jsxs)("div",{className:"todos-wrap",children:[Object(v.jsx)(m,{getDatas:this.toChild()}),Object(v.jsxs)("div",{className:"todos-body",children:[this.state.todoData.map((function(e){return Object(v.jsx)(b,{data:e,parent:t},e.id)})),Object(v.jsx)("div",{className:"loading-wrap",style:{display:this.state.showLoading?"block":"none"},children:Object(v.jsx)("span",{className:"loading",children:Object(v.jsx)("svg",{viewBox:"25 25 50 50",className:"loading-svg",children:Object(v.jsx)("circle",{cx:"50",cy:"50",r:"20",fill:"none"})})})})]}),Object(v.jsxs)("div",{className:"todos-operation",children:[Object(v.jsx)("input",{className:"operation-input",placeholder:"\u5728\u8fd9\u91cc\u8f93\u5165~~",onBlur:this.handleTextChange.bind(this)}),Object(v.jsx)("div",{className:"apply",onClick:this.handleApply.bind(this),children:"\u63d0\u4ea4"})]})]})}}]),n}(i.Component);var D=function(){return Object(v.jsx)("div",{className:"App",children:Object(v.jsx)(w,{})})},T=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,41)).then((function(e){var n=e.getCLS,i=e.getFID,a=e.getFCP,s=e.getLCP,c=e.getTTFB;n(t),i(t),a(t),s(t),c(t)}))};c.a.render(Object(v.jsx)(a.a.StrictMode,{children:Object(v.jsx)(D,{})}),document.getElementById("root")),T()}},[[40,1,2]]]);
//# sourceMappingURL=main.98564fa8.chunk.js.map