!function(t,e){"object"===typeof exports&&"object"===typeof module?module.exports=e():"function"===typeof define&&define.amd?define([],e):"object"===typeof exports?exports["vtodos-main"]=e():t["vtodos-main"]=e()}(this,(function(){return(this.webpackJsonpvtodos=this.webpackJsonpvtodos||[]).push([[0],{20:function(t,e,n){},21:function(t,e,n){},22:function(t,e,n){},23:function(t,e,n){},24:function(t,e,n){},26:function(t,e,n){},27:function(t,e,n){},28:function(t,e,n){},29:function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/avatar.8ac7239d.png"},30:function(t,e,n){},40:function(t,e){},42:function(t,e,n){},43:function(t,e,n){"use strict";n.r(e),n.d(e,"bootstrap",(function(){return L})),n.d(e,"mount",(function(){return I})),n.d(e,"unmount",(function(){return B})),n.d(e,"update",(function(){return W}));var i=n(1),a=n.n(i),s=n(5),c=n(2),o=n.n(c),r=n(8),d=n.n(r),u=(n(20),n(21),n(3)),l=n(4),h=n(7),p=n(6),f=(n(22),n(23),n(24),n(0)),j=function(t){Object(h.a)(n,t);var e=Object(p.a)(n);function n(t){var i;return Object(u.a)(this,n),(i=e.call(this,t)).state={checked:i.props.checked||!1},i}return Object(l.a)(n,[{key:"handleChecked",value:function(){this.props.onClick(),this.setState({checked:!this.state.checked})}},{key:"render",value:function(){var t="check-box ".concat(this.state.checked?"--solved":"--default");return Object(f.jsx)("div",{className:t,onClick:this.handleChecked.bind(this)})}}]),n}(c.Component),v=function(t){Object(h.a)(n,t);var e=Object(p.a)(n);function n(){var t;return Object(u.a)(this,n),(t=e.call(this)).state={isEdit:!1,penddingContent:""},t}return Object(l.a)(n,[{key:"changeItemStatus",value:function(t){t||this.setState({isEdit:!this.state.isEdit})}},{key:"makeAsFinished",value:function(){this.props.parent.makeAsFinished(this.props.data.id)}},{key:"delToDoItem",value:function(){this.props.parent.delToDo(this.props.data.id)}},{key:"changeTodoContent",value:function(){this.state.penddingContent&&this.state.penddingContent.trim()?(this.props.parent.changeTodo(this.props.data.id,this.state.penddingContent),this.setState({isEdit:!1,penddingContent:""})):this.setState({isEdit:!1})}},{key:"handleContentChange",value:function(t){this.setState({penddingContent:t.nativeEvent.target.value})}},{key:"renderEditIcon",value:function(t){return t?Object(f.jsx)("div",{className:"edit-icon",children:Object(f.jsx)("i",{className:"iconfont i-edit",style:{color:"gray"}})}):Object(f.jsx)("div",{className:"edit-icon",children:Object(f.jsx)("i",{className:"iconfont i-edit"})})}},{key:"render",value:function(){var t=this.props.data;return this.state.isEdit?Object(f.jsxs)("div",{className:"todos-item todos-item-edit",children:[Object(f.jsx)("input",{className:"edit-content",defaultValue:t.content,type:"text",onBlur:this.handleContentChange.bind(this)}),Object(f.jsx)("button",{className:"solve-icon",onClick:this.changeTodoContent.bind(this),children:"\ud83d\udcbe"}),Object(f.jsx)("button",{className:"close-icon",title:"\u53d6\u6d88",onClick:this.changeItemStatus.bind(this,0),children:"x"})]}):Object(f.jsxs)("div",{className:"todos-item "+(t.is_finish?"is-finish":""),children:[Object(f.jsx)("div",{className:"item-content",onClick:this.changeItemStatus.bind(this,t.is_finish),children:t.content}),this.renderEditIcon(t.is_finish),Object(f.jsx)("div",{className:"solve-icon",children:Object(f.jsx)(j,{title:t.is_finish?"\u6807\u8bb0\u4e3a\u672a\u5b8c\u6210":"\u6807\u8bb0\u4e3a\u5df2\u5b8c\u6210",checked:t.is_finish,onClick:this.makeAsFinished.bind(this)})}),Object(f.jsx)("button",{className:"close-icon",title:"\u5220\u9664",onClick:this.delToDoItem.bind(this),children:Object(f.jsx)("i",{className:"iconfont i-ashbin"})})]})}}]),n}(c.Component);n(26),n(27);var b=function(t){window.electron&&window.electron.ipcRenderer.send(t)},m=(n(28),function(t){Object(h.a)(n,t);var e=Object(p.a)(n);function n(){var t;return Object(u.a)(this,n),(t=e.call(this)).state={},t}return Object(l.a)(n,[{key:"handleSearch",value:function(t){(0,this.props.getDatas)(t.target.value.trim())}},{key:"render",value:function(){return Object(f.jsxs)("div",{className:"search-wrap",children:[Object(f.jsx)("div",{className:"search-icon"}),Object(f.jsx)("input",{className:"search-body",placeholder:"\u8f93\u5165\u5173\u952e\u5b57\u641c\u7d22",onChange:this.handleSearch.bind(this)})]})}}]),n}(c.Component)),g=function(t){Object(h.a)(i,t);var e=Object(p.a)(i);function i(){var t;return Object(u.a)(this,i),(t=e.call(this)).state={isDesktop:void 0!==window.electron},t}return Object(l.a)(i,[{key:"handleClose",value:function(){b("close-app")}},{key:"handleMiNiSize",value:function(){b("min-app")}},{key:"renderDesktopOperation",value:function(){return this.state.isDesktop?Object(f.jsxs)("div",{className:"operation",children:[Object(f.jsx)("div",{className:"mini-btn",title:"\u6700\u5c0f\u5316",onClick:this.handleMiNiSize.bind(this),children:"-"}),Object(f.jsx)("div",{className:"close-btn",title:"\u5173\u95ed",onClick:this.handleClose.bind(this),children:"\u2717"})]}):""}},{key:"render",value:function(){var t=this.props.getDatas,e=n(29),i={backgroundImage:"url(".concat(e.default,")")},a=function(){t()};return Object(f.jsxs)("div",{className:"todos-header",children:[Object(f.jsx)("div",{className:"starry"}),Object(f.jsx)("div",{className:"todos-logo viavacos",onClick:a}),Object(f.jsxs)("p",{className:"todos-title",onClick:a,children:["\u5fae\u571f\u8c46",Object(f.jsx)("span",{className:"version",children:this.state.isDesktop?"pc":"web"})]}),Object(f.jsx)("div",{className:"search",children:Object(f.jsx)(m,{getDatas:t})}),Object(f.jsxs)("div",{className:"user-info",children:[Object(f.jsx)("div",{className:"head-icon",style:i}),Object(f.jsx)("div",{className:"user-name",children:Object(f.jsx)("span",{children:"\u4f60\u7684\u6635\u79f0"})})]}),this.renderDesktopOperation()]})}}]),i}(c.Component),x=(n(30),function(){function t(){Object(u.a)(this,t),this.id=0,this.dialogWrap=null}return Object(l.a)(t,[{key:"construector",value:function(){var t=document.getElementsByClassName("my-dialog")||[],e=t.length?t[t.length-1].getAttribute("data-id"):0;this.id=e?+e+1:1}},{key:"open",value:function(t){var e=document.getElementById("my-dialog-wrap");e?this.dialogWrap=e:(this.dialogWrap=document.createElement("div"),this.dialogWrap.setAttribute("id","my-dialog-wrap"),document.body.append(this.dialogWrap));var n=Object(f.jsxs)("div",{className:"my-dialog","data-id":this.id,children:[Object(f.jsx)("div",{className:"my-dialog-title",children:"\u786e\u8ba4\u5f39\u7a97"}),Object(f.jsx)("div",{className:"my-dialog-content",children:"\u662f\u5426\u786e\u5b9a\u5220\u9664?"}),Object(f.jsxs)("div",{className:"my-dialog-operation",children:[Object(f.jsx)("div",{className:"cancel",onClick:this.close.bind(this),children:"\u53d6\u6d88"}),Object(f.jsx)("div",{className:"confirm",onClick:this.confirm.bind(this,t),children:"\u786e\u5b9a"})]})]});Object(r.render)(n,this.dialogWrap)}},{key:"close",value:function(){var t;null===(t=this.dialogWrap)||void 0===t||t.remove()}},{key:"confirm",value:function(t){t&&t(),this.close()}},{key:"cancel",value:function(){this.close()}}]),t}()),O=n(14),k=n.n(O);var y=function(t,e,n){var i={method:t.toUpperCase(),mode:"no-cors"};if(["POST","DELETE"].includes(i.method)&&(i.headers={"Content-Type":"application/x-www-form-urlencoded"},i.body=k.a.stringify(n)),["GET"].includes(i.method)){var a="";for(var s in n)a+=s+"="+n[s]+"&";a=a.substring(0,a.length-1),e+="?"+a}return new Promise((function(t,n){fetch(e,i).then((function(e){t(e.json())})).catch((function(t){}))}))},w=window.origin.includes("https")?3002:3001,N="//viavacos.live:".concat(w),C=function(t){return y("get",N+"/getTodosList",t)},D=new x,T=function(t){Object(h.a)(n,t);var e=Object(p.a)(n);function n(){var t;return Object(u.a)(this,n),(t=e.call(this)).state={todoData:[{id:1,content:"test1",is_finish:0},{id:2,content:"test2",is_finish:1},{id:3,content:"test3",is_finish:0}],paddingAddedText:"",showLoading:!1,debounceFlag:null},t}return Object(l.a)(n,[{key:"makeAsFinished",value:function(t){var e=this,n=this.state.todoData;n.forEach(function(){var i=Object(s.a)(a.a.mark((function i(s,c){return a.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(s.id!==t){i.next=7;break}return i.next=3,a={id:s.id,is_finish:1===n[c].is_finish?0:1},y("post",N+"/finishTodo",a);case 3:if(200===i.sent.code){i.next=6;break}return i.abrupt("return");case 6:e.getDataList();case 7:case"end":return i.stop()}var a}),i)})));return function(t,e){return i.apply(this,arguments)}}())}},{key:"delToDo",value:function(t){var e=this;D.open((function(){e.state.todoData.forEach(function(){var n=Object(s.a)(a.a.mark((function n(i,s){var c;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i.id!==t){n.next=6;break}return n.next=3,y("delete",N+"/deleteTodo",{id:t});case 3:c=n.sent,console.log(c),e.getDataList();case 6:case"end":return n.stop()}}),n)})));return function(t,e){return n.apply(this,arguments)}}())}))}},{key:"addToDo",value:function(){var t=Object(s.a)(a.a.mark((function t(e){var n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y("post",N+"/addTodo",{content:e});case 2:n=t.sent,console.log(n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"changeTodo",value:function(t,e){var n=this,i=this.state.todoData;i.forEach(function(){var c=Object(s.a)(a.a.mark((function s(c,o){var r;return a.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(c.id!==t){a.next=7;break}return i[o].content=e,a.next=4,s={id:c.id,content:c.content},y("post",N+"/updateTodo",s);case 4:r=a.sent,console.log(r),n.getDataList();case 7:case"end":return a.stop()}var s}),s)})));return function(t,e){return c.apply(this,arguments)}}())}},{key:"handleTextChange",value:function(t){this.setState({paddingAddedText:t.nativeEvent.target.value})}},{key:"handleApply",value:function(){var t=Object(s.a)(a.a.mark((function t(){var e;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((e=this.state.paddingAddedText)&&e.trim()){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,this.addToDo(e);case 5:this.setState({paddingAddedText:""}),document.getElementsByClassName("operation-input")[0].value="",this.getDataList();case 8:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getDataList",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.setState({showLoading:!0}),this.state.debounceFlag&&clearTimeout(this.state.debounceFlag);var n=setTimeout(Object(s.a)(a.a.mark((function n(){var i;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,C({keywords:e});case 2:200===(i=n.sent).code&&t.setState({showLoading:!1,todoData:i.data});case 4:case"end":return n.stop()}}),n)}))),300);this.setState({debounceFlag:n})}},{key:"toChild",value:function(t){var e=this;return function(t){e.getDataList(t)}}},{key:"componentDidMount",value:function(){this.getDataList()}},{key:"render",value:function(){var t=this;return Object(f.jsxs)("div",{className:"todos-wrap",children:[Object(f.jsx)(g,{getDatas:this.toChild()}),Object(f.jsxs)("div",{className:"todos-body",children:[this.state.todoData.map((function(e){return Object(f.jsx)(v,{data:e,parent:t},e.id)})),Object(f.jsx)("div",{className:"loading-wrap",style:{display:this.state.showLoading?"block":"none"},children:Object(f.jsx)("span",{className:"loading",children:Object(f.jsx)("svg",{viewBox:"25 25 50 50",className:"loading-svg",children:Object(f.jsx)("circle",{cx:"50",cy:"50",r:"20",fill:"none"})})})})]}),Object(f.jsxs)("div",{className:"todos-operation",children:[Object(f.jsx)("input",{className:"operation-input",placeholder:"\u5728\u8fd9\u91cc\u8f93\u5165~~",onBlur:this.handleTextChange.bind(this)}),Object(f.jsx)("div",{className:"apply",onClick:this.handleApply.bind(this),children:"\u63d0\u4ea4"})]})]})}}]),n}(c.Component);var E=function(){return Object(f.jsx)("div",{className:"App",children:Object(f.jsx)(T,{})})},S=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,44)).then((function(e){var n=e.getCLS,i=e.getFID,a=e.getFCP,s=e.getLCP,c=e.getTTFB;n(t),i(t),a(t),s(t),c(t)}))};n(42);function L(){return A.apply(this,arguments)}function A(){return(A=Object(s.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("react app bootstraped");case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function I(t){return F.apply(this,arguments)}function F(){return(F=Object(s.a)(a.a.mark((function t(e){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:d.a.render(Object(f.jsx)(E,{}),e.container?e.container.querySelector("#container-wrapper"):document.getElementById("root"));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function B(t){return _.apply(this,arguments)}function _(){return(_=Object(s.a)(a.a.mark((function t(e){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:d.a.unmountComponentAtNode(e.container?e.container.querySelector("#container-wrapper"):document.getElementById("root"));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function W(t){return M.apply(this,arguments)}function M(){return(M=Object(s.a)(a.a.mark((function t(e){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("update props",e);case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}d.a.render(Object(f.jsx)(o.a.StrictMode,{children:Object(f.jsx)(E,{})}),document.getElementById("root")),S()}},[[43,1,2]]])}));
//# sourceMappingURL=main.99f9db2c.chunk.js.map