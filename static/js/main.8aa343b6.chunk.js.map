{"version":3,"sources":["assets/imgs/avatar.png","components/checkbox/index.tsx","views/todos/todosItem.js","utils/ipcRenderer.js","views/search/index.js","views/header/index.js","utils/dialog.tsx","utils/request.js","api/todo.js","views/todos/todos.js","App.js","reportWebVitals.js","index.js"],"names":["CheckBox","props","state","checked","this","onClick","setState","checkboxClass","className","handleChecked","bind","Component","ToDosItem","isEdit","penddingContent","is_finish","parent","makeAsFinished","data","id","delToDo","trim","changeTodo","e","nativeEvent","target","value","defaultValue","content","type","onBlur","handleContentChange","changeTodoContent","title","changeItemStatus","delToDoItem","ipcRenderer","event","window","electron","send","Search","getDatas","placeholder","onChange","handleSearch","Header","isDesktop","undefined","handleMiNiSize","handleClose","img","require","headIcon","backgroundImage","default","refresh","style","renderDesktopOperation","MyDialog","dialogWrap","myDialogList","document","getElementsByClassName","lastId","length","getAttribute","callBack","getElementById","createElement","setAttribute","body","append","element","data-id","close","confirm","render","remove","request","method","url","fetchConfig","toUpperCase","includes","headers","qs","stringify","query","key","substring","Promise","resolve","reject","fetch","then","response","json","catch","error","base","getTodosList","Dialog","ToDos","todoData","paddingAddedText","showLoading","debounceFlag","forEach","item","idx","a","code","getDataList","open","res","console","log","addToDo","keywords","clearTimeout","timer","setTimeout","toChild","map","display","viewBox","cx","cy","r","fill","handleTextChange","handleApply","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode"],"mappings":"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","file":"static/js/main.8aa343b6.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/avatar.8ac7239d.png\";","import { Component } from 'react'\nimport './index.scss'\n\ntype stateType = {\n  checked: boolean\n}\n\ntype propsType = {\n  checked: boolean\n  onClick: Function\n}\n\ninterface CheckBox {\n  state: stateType\n  props: propsType\n}\n\nclass CheckBox extends Component {\n  constructor(props:object){\n    super(props)\n    this.state = {\n      checked: this.props.checked || false\n    }\n  }\n\n  // 选择|取消选择\n  handleChecked(){\n    this.props.onClick()\n    this.setState({\n      checked: !this.state.checked\n    })\n  }\n\n  render(){\n    // 设置状态(默认|解决)\n    const checkboxClass = `check-box ${this.state.checked ? '--solved':'--default'}`\n\n    return <div className={checkboxClass} onClick={this.handleChecked.bind(this)}></div>\n  }\n}\n\nexport default CheckBox\n","import { Component  } from 'react'\nimport '../../styles/todos/todosItem.scss'\nimport CheckBox from '../../components/checkbox/index.tsx'\n\nclass ToDosItem extends Component {\n\n  constructor(){\n    super()\n    this.state = {\n      isEdit: false,\n      penddingContent: ''\n    }\n  }\n\n  // 修改状态\n  changeItemStatus(is_finish){\n    // 已完成，不可编辑\n    if(is_finish) return\n\n    this.setState({\n      isEdit: !this.state.isEdit\n    })\n  }\n\n  // 标记为已完成\n  makeAsFinished() {\n    this.props.parent.makeAsFinished(this.props.data.id)\n  }\n\n  // 删除\n  delToDoItem(){\n    this.props.parent.delToDo(this.props.data.id)\n  }\n\n  // 修改\n  changeTodoContent(){\n    if(!this.state.penddingContent || !this.state.penddingContent.trim()) {\n      this.setState({ isEdit: false })\n      return\n    }\n\n    this.props.parent.changeTodo(this.props.data.id, this.state.penddingContent)\n\n    this.setState({\n      isEdit: false,\n      penddingContent: ''\n    })\n  }\n\n  // 内容变更，更新数据\n  handleContentChange(e) {\n    this.setState({ penddingContent: e.nativeEvent.target.value })\n  }\n\n  render(){\n    const data = this.props.data\n    return (\n      this.state.isEdit\n      ? (<div className=\"todos-item todos-item-edit\">\n          <input className=\"edit-content\" defaultValue={data.content} type=\"text\" onBlur={this.handleContentChange.bind(this)}/>\n          <button className=\"solve-icon\" onClick={this.changeTodoContent.bind(this)}>💾</button>\n          <button className=\"close-icon\" title=\"取消\" onClick={this.changeItemStatus.bind(this, 0)}>x</button>\n        </div>)\n      : (<div className={'todos-item ' + (data.is_finish ? 'is-finish' : '')}>\n          <div className=\"item-content\" onClick={this.changeItemStatus.bind(this, data.is_finish)}>{ data.content }</div>\n          <div className=\"solve-icon\">\n            <CheckBox title={ data.is_finish ? '标记为未完成' : '标记为已完成' } checked={data.is_finish} onClick={this.makeAsFinished.bind(this)}></CheckBox>\n          </div>\n          <button className=\"close-icon\" title=\"删除\" onClick={this.delToDoItem.bind(this)}>\n            <i className=\"iconfont i-ashbin\"></i>\n          </button>\n        </div>)\n    )\n  }\n}\n\nexport default ToDosItem\n\n// const ToDoSItem = ({data}) => {\n//   return (\n//     <div className={'todos-item ' + (data.is_finish ? 'is-finish' : '')}>\n//       <div className=\"item-content\">{ data.content }</div>\n//       <button className=\"solve-icon\" onClick={() => {\n//         console.log(data.id);\n//       }}>√</button>\n//       <button className=\"close-icon\">x</button>\n//     </div>\n//   )\n// }\n// export default ToDoSItem\n","function ipcRenderer(event){\n  if(window.electron) {\n    window.electron.ipcRenderer.send(event)\n  }\n}\n\nexport default ipcRenderer\n","import { Component } from 'react'\nimport '../../styles/search/index.scss'\n\nclass Search extends Component {\n    constructor(){\n        super()\n        this.state = {}\n    }\n\n    handleSearch(e){\n        const { getDatas } = this.props\n        getDatas(e.target.value.trim())\n    }\n\n    render(){\n        return (\n            <div className=\"search-wrap\">\n                <div className=\"search-icon\"></div>\n                <input className=\"search-body\" placeholder=\"输入关键字搜索\" onChange={this.handleSearch.bind(this)}></input>\n            </div>\n        )\n    }\n}\n\nexport default Search","import { Component } from 'react'\nimport '../../styles/header/index.scss'\nimport '../../styles/cool.scss'\nimport ipcRenderer from '../../utils/ipcRenderer'\nimport Search from '../search'\n\nclass Header extends Component {\n  constructor(){\n    super()\n    this.state = {\n      isDesktop: window.electron !== undefined\n    }\n  }\n\n  // 关闭当前窗口\n  handleClose(){\n    ipcRenderer('close-app')\n  }\n\n  // 最小化\n  handleMiNiSize(){\n    ipcRenderer('min-app')\n  }\n\n  // 渲染桌面程序的操作栏\n  renderDesktopOperation(){\n    return this.state.isDesktop ?\n      (\n        <div className=\"operation\">\n          <div className=\"mini-btn\" title=\"最小化\" onClick={this.handleMiNiSize.bind(this)}>-</div>\n          <div className=\"close-btn\" title=\"关闭\" onClick={this.handleClose.bind(this)}>✗</div>\n        </div>\n      )\n      : ''\n  }\n\n  render(){\n    const { getDatas } = this.props\n    const img = require('../../assets/imgs/avatar.png')\n    const headIcon = {\n      backgroundImage: `url(${img.default})`\n    }\n    const refresh = () => {\n      getDatas()\n    }\n    return (\n      <div className=\"todos-header\">\n        <div className=\"starry\"></div>\n        <div className=\"todos-logo viavacos\" onClick={refresh}></div>\n        <p className=\"todos-title\" onClick={refresh}>\n          微土豆\n          <span className=\"version\">{ this.state.isDesktop ? 'pc' : 'web' }</span>\n        </p>\n        <div className=\"search\">\n          <Search getDatas={getDatas}></Search>\n        </div>\n        <div className=\"user-info\">\n          <div className=\"head-icon\" style={headIcon}></div>\n          <div className=\"user-name\"><span>你的昵称</span></div>\n        </div>\n        { this.renderDesktopOperation() }\n      </div>\n    )\n  }\n}\n\nexport default Header","import { render } from 'react-dom'\nimport '../styles/dialog.scss'\n\ninterface Dialog {\n  id: number; // 弹窗id (not-use)\n  open(): void; // 打开\n  close(): void; // 关闭\n  confirm(): void; // 确认\n  cancel(): void; // 取消\n}\n\nclass MyDialog implements Dialog {\n\n  id: number = 0\n  dialogWrap: Element | null = null\n\n  construector() {\n    const myDialogList = document.getElementsByClassName('my-dialog') || []\n    const lastId = myDialogList.length \n      ? (myDialogList[myDialogList.length - 1].getAttribute('data-id')) \n      : 0\n    this.id = lastId ? +lastId + 1 : 1\n  }\n\n  open(callBack?: Function){\n    let dialogWrap = document.getElementById('my-dialog-wrap')\n    if(!dialogWrap) {\n      this.dialogWrap = document.createElement('div')\n      this.dialogWrap.setAttribute('id', 'my-dialog-wrap')\n      document.body.append(this.dialogWrap)\n    } else {\n      this.dialogWrap = dialogWrap\n    }\n\n    const element = (<div className=\"my-dialog\" data-id={this.id}>\n      <div className=\"my-dialog-title\">确认弹窗</div>\n      <div className=\"my-dialog-content\">是否确定删除?</div>\n      <div className=\"my-dialog-operation\">\n        <div className=\"cancel\" onClick={this.close.bind(this)}>取消</div>\n        <div className=\"confirm\" onClick={this.confirm.bind(this, callBack)}>确定</div>\n      </div>\n    </div>)\n\n    render(element, this.dialogWrap)\n  }\n\n  close(){\n    this.dialogWrap?.remove()\n  }\n\n  confirm(callBack?: Function){\n    callBack && callBack()\n    this.close()\n  }\n\n  cancel(){\n    this.close()\n  }\n}\n\nexport default MyDialog\n","import qs from 'qs';\n\nfunction request (method, url, data){\n  const fetchConfig = {\n    method: method.toUpperCase(),\n  }\n\n  // 设置请求头\n  if(['POST', 'DELETE'].includes(fetchConfig.method)) {\n    fetchConfig.headers = {\n      'Content-Type': 'application/x-www-form-urlencoded'\n    }\n    // 设置请求体传参(序列化参数)\n    fetchConfig.body = qs.stringify(data)\n  }\n  // 设置地址栏传参\n  if(['GET'].includes(fetchConfig.method)) {\n    let query = ''\n    for (const key in data) {\n      query += key + '=' + data[key]  + '&'\n    }\n    query = query.substring(0, query.length - 1)\n    url += '?' + query\n  }\n\n\n  return new Promise((resolve, reject) => {\n    fetch(url, fetchConfig).then(response => {\n      resolve(response.json())\n    }).catch(error => {\n    })\n  })\n}\n\nexport default request\n","import request from '../utils/request'\nconst base = 'http://localhost:3001'\n// const base = 'http://101.37.87.30:3001'\n\n\n// 获取列表\nexport const getTodosList = (data) => {\n  return request('get', base + '/getTodosList', data)\n}\n\n// 更新\nexport const updateTodo = (data) => {\n  return request('post', base + '/updateTodo', data)\n}\n\n// 新增\nexport const addTodo = (data) => {\n  return request('post', base + '/addTodo', data)\n}\n\n// 删除\nexport const deleteTodo = (data) => {\n  return request('delete', base + '/deleteTodo', data)\n}\n\n// 标记完成/未完成\nexport const finishTodo = (data) => {\n  return request('post', base + '/finishTodo', data)\n}","import { Component } from 'react'\nimport '@/styles/todos/todos.scss'\nimport ToDosItem from './todosItem'\nimport Header from '../header'\nimport MyDialog from '@/utils/dialog.tsx'\nimport { getTodosList, updateTodo, addTodo, deleteTodo, finishTodo } from '@/api/todo'\nconst Dialog = new MyDialog()\n\nclass ToDos extends Component {\n  constructor(){\n    super()\n    this.state = {\n      todoData: [\n        { id: 1, content: 'test1', is_finish: 0 },\n        { id: 2, content: 'test2', is_finish: 1 },\n        { id: 3, content: 'test3', is_finish: 0 }\n      ],\n      paddingAddedText: '',\n      showLoading: false, // 是否显示loading\n      debounceFlag: null // 防抖参数\n    }\n  }\n\n  /**\n   * 标为已完成\n   * @param {number} id 任务id \n   */\n  makeAsFinished(id) {\n    const { todoData } = this.state\n    todoData.forEach(async (item, idx) => {\n      if(item.id === id) {\n        // todoData[idx].is_finish = todoData[idx].is_finish == 1 ? 0 : 1\n        const res = await finishTodo({\n          id: item.id,\n          is_finish: todoData[idx].is_finish === 1 ? 0 : 1\n        })\n        if(res.code !== 200) return\n        this.getDataList()\n      }\n    })\n    // this.setState({todoData})\n  }\n\n  /**\n   * 删除任务\n   * @param {number} id 任务id \n   */\n  delToDo(id){\n    Dialog.open(() => {\n      const { todoData } = this.state\n      todoData.forEach(async (item, idx) => {\n        if(item.id === id) {\n          // todoData.splice(idx, 1)\n          const res = await deleteTodo({ id })\n          console.log(res);\n          this.getDataList()\n        }\n      })\n      // this.setState({todoData})\n    })\n  }\n\n  /**\n   * 新增任务\n   * @param {String} content 任务内容\n   */\n  async addToDo(content){\n    // const { todoData } = this.state\n    // const todoItem = {\n    //   id: todoData[todoData.length - 1].id + 1,\n    //   content,\n    //   is_finish: 0\n    // }\n    // todoData.push(todoItem)\n    // this.setState({ todoData, paddingAddedText: ''})\n\n    const res = await addTodo({ content })\n    console.log(res);\n  }\n\n  /**\n   * 修改任务\n   * @param {Number} id \n   * @param {String} content \n   */\n  changeTodo(id, content){\n    const { todoData } = this.state\n    todoData.forEach(async (item, idx) => {\n      if(item.id === id) {\n        todoData[idx].content = content\n        const res = await updateTodo({\n          id: item.id,\n          content: item.content\n        })\n        console.log(res);\n        this.getDataList()\n      }\n    })\n    // this.setState({todoData})\n  }\n\n  handleTextChange(e) {\n    this.setState({\n      paddingAddedText: e.nativeEvent.target.value\n    })\n  }\n\n  async handleApply(){\n    const { paddingAddedText } = this.state\n    if(!paddingAddedText || !paddingAddedText.trim()) return\n    await this.addToDo(paddingAddedText)\n\n    // 清空数据\n    this.setState({\n      paddingAddedText: ''\n    })\n    // 清空dom展示\n    document.getElementsByClassName('operation-input')[0].value = ''\n\n    this.getDataList()\n  }\n\n  getDataList(keywords = '') {\n    this.setState({ showLoading: true })\n    // 防个抖\n    if(this.state.debounceFlag) {\n      clearTimeout(this.state.debounceFlag)\n    }\n\n    const timer = setTimeout(async () => {\n      const res = await getTodosList({\n        keywords // 搜索关键词\n      })\n      if(res.code === 200) {\n        this.setState({showLoading: false, todoData: res.data})\n      }\n    }, 300);\n    this.setState({debounceFlag: timer})\n  }\n\n  // 传给子组件的函数(闭包保留当前this)\n  toChild(keywords){\n    return (keywords) => {\n      this.getDataList(keywords)\n    }\n  }\n\n  componentDidMount(){\n    this.getDataList()\n  }\n\n  render() {\n    return (\n      <div className=\"todos-wrap\">\n        <Header getDatas={this.toChild()}></Header>\n        <div className=\"todos-body\">\n          { this.state.todoData.map(item => {\n            return <ToDosItem key={item.id} data={item} parent={this}></ToDosItem>\n          }) }\n          <div className=\"loading-wrap\" style={{display: this.state.showLoading ? 'block' : 'none'}}>\n            <span className=\"loading\">\n              <svg viewBox=\"25 25 50 50\" className=\"loading-svg\">\n                <circle cx=\"50\" cy=\"50\" r=\"20\" fill=\"none\"></circle>\n              </svg>\n            </span>\n          </div>\n        </div>\n        <div className=\"todos-operation\">\n          <input className=\"operation-input\" placeholder=\"在这里输入~~\" onBlur={this.handleTextChange.bind(this)} />\n          <div className=\"apply\" onClick={this.handleApply.bind(this)}>提交</div>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default ToDos\n","import './styles/App.scss';\nimport ToDos from './views/todos/todos'\n// import RouterConfig from './router/index'\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      {/* <RouterConfig></RouterConfig> */}\n      <ToDos></ToDos>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './styles/index.scss';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport '@/assets/iconfonts/iconfont.css'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}