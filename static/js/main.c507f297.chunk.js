!function(t,e){"object"===typeof exports&&"object"===typeof module?module.exports=e():"function"===typeof define&&define.amd?define([],e):"object"===typeof exports?exports["vtodos-main"]=e():t["vtodos-main"]=e()}(this,(function(){return(this.webpackJsonpvtodos=this.webpackJsonpvtodos||[]).push([[0],{33:function(t,e,n){},34:function(t,e,n){},35:function(t,e,n){},36:function(t,e,n){},37:function(t,e,n){},39:function(t,e,n){},40:function(t,e,n){},41:function(t,e,n){},42:function(t,e,n){"use strict";n.r(e),e.default=n.p+"static/media/avatar.8ac7239d.png"},43:function(t,e,n){},53:function(t,e){},60:function(t,e,n){},61:function(t,e,n){"use strict";n.r(e),n.d(e,"bootstrap",(function(){return M})),n.d(e,"mount",(function(){return z})),n.d(e,"unmount",(function(){return R})),n.d(e,"update",(function(){return G}));var a=n(2),i=n.n(a),s=n(12),c=n(1),o=n.n(c),r=n(14),d=n.n(r),u=(n(33),n(34),n(5)),l=n(6),h=n(8),p=n(7),j=(n(35),n(36),n(37),n(0)),f=function(t){Object(h.a)(n,t);var e=Object(p.a)(n);function n(t){var a;return Object(u.a)(this,n),(a=e.call(this,t)).state={checked:a.props.checked||!1},a}return Object(l.a)(n,[{key:"handleChecked",value:function(){this.props.onClick(),this.setState({checked:!this.state.checked})}},{key:"render",value:function(){var t="check-box ".concat(this.state.checked?"--solved":"--default");return Object(j.jsx)("div",{className:t,onClick:this.handleChecked.bind(this)})}}]),n}(c.Component),b=function(t){Object(h.a)(n,t);var e=Object(p.a)(n);function n(){var t;return Object(u.a)(this,n),(t=e.call(this)).state={isEdit:!1,penddingContent:""},t}return Object(l.a)(n,[{key:"changeItemStatus",value:function(t){t||this.setState({isEdit:!this.state.isEdit})}},{key:"makeAsFinished",value:function(){this.props.parent.makeAsFinished(this.props.data.id)}},{key:"delToDoItem",value:function(){this.props.parent.delToDo(this.props.data.id)}},{key:"changeTodoContent",value:function(){this.state.penddingContent&&this.state.penddingContent.trim()?(this.props.parent.changeTodo(this.props.data.id,this.state.penddingContent),this.setState({isEdit:!1,penddingContent:""})):this.setState({isEdit:!1})}},{key:"handleContentChange",value:function(t){this.setState({penddingContent:t.nativeEvent.target.value})}},{key:"renderEditIcon",value:function(t){return t?Object(j.jsx)("div",{className:"edit-icon",children:Object(j.jsx)("i",{className:"iconfont i-edit",style:{color:"gray"}})}):Object(j.jsx)("div",{className:"edit-icon",children:Object(j.jsx)("i",{className:"iconfont i-edit"})})}},{key:"render",value:function(){var t=this.props.data;return this.state.isEdit?Object(j.jsxs)("div",{className:"todos-item todos-item-edit",children:[Object(j.jsx)("input",{className:"edit-content",defaultValue:t.content,type:"text",onBlur:this.handleContentChange.bind(this)}),Object(j.jsx)("button",{className:"solve-icon",onClick:this.changeTodoContent.bind(this),children:"\ud83d\udcbe"}),Object(j.jsx)("button",{className:"close-icon",title:"\u53d6\u6d88",onClick:this.changeItemStatus.bind(this,0),children:"x"})]}):Object(j.jsxs)("div",{className:"todos-item "+(t.is_finish?"is-finish":""),children:[Object(j.jsx)("div",{className:"item-content",onClick:this.changeItemStatus.bind(this,t.is_finish),children:t.content}),this.renderEditIcon(t.is_finish),Object(j.jsx)("div",{className:"solve-icon",children:Object(j.jsx)(f,{title:t.is_finish?"\u6807\u8bb0\u4e3a\u672a\u5b8c\u6210":"\u6807\u8bb0\u4e3a\u5df2\u5b8c\u6210",checked:t.is_finish,onClick:this.makeAsFinished.bind(this)})}),Object(j.jsx)("button",{className:"close-icon",title:"\u5220\u9664",onClick:this.delToDoItem.bind(this),children:Object(j.jsx)("i",{className:"iconfont i-ashbin"})})]})}}]),n}(c.Component);n(39),n(40);var v=function(t){window.electron&&window.electron.ipcRenderer.send(t)},m=(n(41),function(t){Object(h.a)(n,t);var e=Object(p.a)(n);function n(){var t;return Object(u.a)(this,n),(t=e.call(this)).state={},t}return Object(l.a)(n,[{key:"handleSearch",value:function(t){(0,this.props.getDatas)(t.target.value.trim())}},{key:"render",value:function(){return Object(j.jsxs)("div",{className:"search-wrap",children:[Object(j.jsx)("div",{className:"search-icon"}),Object(j.jsx)("input",{className:"search-body",placeholder:"\u8f93\u5165\u5173\u952e\u5b57\u641c\u7d22",onChange:this.handleSearch.bind(this)})]})}}]),n}(c.Component)),O=function(t){Object(h.a)(a,t);var e=Object(p.a)(a);function a(){var t;return Object(u.a)(this,a),(t=e.call(this)).state={isDesktop:void 0!==window.electron},t}return Object(l.a)(a,[{key:"handleClose",value:function(){v("close-app")}},{key:"handleMiNiSize",value:function(){v("min-app")}},{key:"renderDesktopOperation",value:function(){return this.state.isDesktop?Object(j.jsxs)("div",{className:"operation",children:[Object(j.jsx)("div",{className:"mini-btn",title:"\u6700\u5c0f\u5316",onClick:this.handleMiNiSize.bind(this),children:"-"}),Object(j.jsx)("div",{className:"close-btn",title:"\u5173\u95ed",onClick:this.handleClose.bind(this),children:"\u2717"})]}):""}},{key:"render",value:function(){var t=this.props.getDatas,e=n(42),a={backgroundImage:"url(".concat(e.default,")")},i=function(){t()};return Object(j.jsxs)("div",{className:"todos-header",children:[Object(j.jsx)("div",{className:"starry"}),Object(j.jsx)("div",{className:"todos-logo viavacos",onClick:i}),Object(j.jsxs)("p",{className:"todos-title",onClick:i,children:["\u5fae\u571f\u8c46",Object(j.jsx)("span",{className:"version",children:this.state.isDesktop?"pc":"web"})]}),Object(j.jsx)("div",{className:"search",children:Object(j.jsx)(m,{getDatas:t})}),Object(j.jsxs)("div",{className:"user-info",children:[Object(j.jsx)("div",{className:"head-icon",style:a}),Object(j.jsx)("div",{className:"user-name",children:Object(j.jsx)("span",{children:"\u4f60\u7684\u6635\u79f0"})})]}),this.renderDesktopOperation()]})}}]),a}(c.Component),x=(n(43),function(){function t(){Object(u.a)(this,t),this.id=0,this.dialogWrap=null}return Object(l.a)(t,[{key:"construector",value:function(){var t=document.getElementsByClassName("my-dialog")||[],e=t.length?t[t.length-1].getAttribute("data-id"):0;this.id=e?+e+1:1}},{key:"open",value:function(t){var e=document.getElementById("my-dialog-wrap");e?this.dialogWrap=e:(this.dialogWrap=document.createElement("div"),this.dialogWrap.setAttribute("id","my-dialog-wrap"),document.body.append(this.dialogWrap));var n=Object(j.jsxs)("div",{className:"my-dialog","data-id":this.id,children:[Object(j.jsx)("div",{className:"my-dialog-title",children:"\u786e\u8ba4\u5f39\u7a97"}),Object(j.jsx)("div",{className:"my-dialog-content",children:"\u662f\u5426\u786e\u5b9a\u5220\u9664?"}),Object(j.jsxs)("div",{className:"my-dialog-operation",children:[Object(j.jsx)("div",{className:"cancel",onClick:this.close.bind(this),children:"\u53d6\u6d88"}),Object(j.jsx)("div",{className:"confirm",onClick:this.confirm.bind(this,t),children:"\u786e\u5b9a"})]})]});Object(r.render)(n,this.dialogWrap)}},{key:"close",value:function(){var t;null===(t=this.dialogWrap)||void 0===t||t.remove()}},{key:"confirm",value:function(t){t&&t(),this.close()}},{key:"cancel",value:function(){this.close()}}]),t}()),g=n(25),y=n.n(g);var k=function(t,e,n){var a={method:t.toUpperCase()};if(["POST","DELETE"].includes(a.method)&&(a.headers={"Content-Type":"application/x-www-form-urlencoded"},a.body=y.a.stringify(n)),["GET"].includes(a.method)){var i="";for(var s in n)i+=s+"="+n[s]+"&";i=i.substring(0,i.length-1),e+="?"+i}return new Promise((function(t,n){fetch(e,a).then((function(e){t(e.json())})).catch((function(t){console.error(t)}))}))},w=window.origin.includes("https")?3002:3001,C="//viavacos.live:".concat(w),N=function(t){return k("get",C+"/getTodosList",t)},D=new x,T=function(t){Object(h.a)(n,t);var e=Object(p.a)(n);function n(){var t;return Object(u.a)(this,n),(t=e.call(this)).state={todoData:[],paddingAddedText:"",showLoading:!1,debounceFlag:null},t}return Object(l.a)(n,[{key:"makeAsFinished",value:function(t){var e=this,n=this.state.todoData;n.forEach(function(){var a=Object(s.a)(i.a.mark((function a(s,c){return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(s.id!==t){a.next=7;break}return a.next=3,i={id:s.id,is_finish:1===n[c].is_finish?0:1},k("post",C+"/finishTodo",i);case 3:if(200===a.sent.code){a.next=6;break}return a.abrupt("return");case 6:e.getDataList();case 7:case"end":return a.stop()}var i}),a)})));return function(t,e){return a.apply(this,arguments)}}())}},{key:"delToDo",value:function(t){var e=this;D.open((function(){e.state.todoData.forEach(function(){var n=Object(s.a)(i.a.mark((function n(a,s){var c;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a.id!==t){n.next=6;break}return n.next=3,k("delete",C+"/deleteTodo",{id:t});case 3:c=n.sent,console.log(c),e.getDataList();case 6:case"end":return n.stop()}}),n)})));return function(t,e){return n.apply(this,arguments)}}())}))}},{key:"addToDo",value:function(){var t=Object(s.a)(i.a.mark((function t(e){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k("post",C+"/addTodo",{content:e});case 2:n=t.sent,console.log(n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"changeTodo",value:function(t,e){var n=this,a=this.state.todoData;a.forEach(function(){var c=Object(s.a)(i.a.mark((function s(c,o){var r;return i.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(c.id!==t){i.next=7;break}return a[o].content=e,i.next=4,s={id:c.id,content:c.content},k("post",C+"/updateTodo",s);case 4:r=i.sent,console.log(r),n.getDataList();case 7:case"end":return i.stop()}var s}),s)})));return function(t,e){return c.apply(this,arguments)}}())}},{key:"handleTextChange",value:function(t){this.setState({paddingAddedText:t.nativeEvent.target.value})}},{key:"handleApply",value:function(){var t=Object(s.a)(i.a.mark((function t(){var e;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((e=this.state.paddingAddedText)&&e.trim()){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,this.addToDo(e);case 5:this.setState({paddingAddedText:""}),document.getElementsByClassName("operation-input")[0].value="",this.getDataList();case 8:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getDataList",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.setState({showLoading:!0}),this.state.debounceFlag&&clearTimeout(this.state.debounceFlag);var n=setTimeout(Object(s.a)(i.a.mark((function n(){var a;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,N({keywords:e});case 2:200===(a=n.sent).code&&t.setState({showLoading:!1,todoData:a.data});case 4:case"end":return n.stop()}}),n)}))),300);this.setState({debounceFlag:n})}},{key:"toChild",value:function(t){var e=this;return function(t){e.getDataList(t)}}},{key:"componentDidMount",value:function(){this.getDataList()}},{key:"render",value:function(){var t=this;return Object(j.jsxs)("div",{className:"todos-wrap",children:[Object(j.jsx)(O,{getDatas:this.toChild()}),Object(j.jsxs)("div",{className:"todos-body",children:[this.state.todoData.map((function(e){return Object(j.jsx)(b,{data:e,parent:t},e.id)})),Object(j.jsx)("div",{className:"loading-wrap",style:{display:this.state.showLoading?"block":"none"},children:Object(j.jsx)("span",{className:"loading",children:Object(j.jsx)("svg",{viewBox:"25 25 50 50",className:"loading-svg",children:Object(j.jsx)("circle",{cx:"50",cy:"50",r:"20",fill:"none"})})})})]}),Object(j.jsxs)("div",{className:"todos-operation",children:[Object(j.jsx)("input",{className:"operation-input",placeholder:"\u5728\u8fd9\u91cc\u8f93\u5165~~",onBlur:this.handleTextChange.bind(this)}),Object(j.jsx)("div",{className:"apply",onClick:this.handleApply.bind(this),children:"\u63d0\u4ea4"})]})]})}}]),n}(c.Component),E=n(9),S=n(26),A=n(3),L=window.__POWERED_BY_QIANKUN__?"/subapp/vtodos":"",I=Object(E.b)({basename:L}),_=function(t){Object(h.a)(n,t);var e=Object(p.a)(n);function n(){return Object(u.a)(this,n),e.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(j.jsxs)("div",{children:[Object(j.jsx)("h1",{children:"App"}),Object(j.jsx)("ul",{children:Object(j.jsx)("li",{children:Object(j.jsx)(S.a,{to:"/todos",children:"Todos"})})})]})}}]),n}(o.a.Component),F=function(t){Object(h.a)(n,t);var e=Object(p.a)(n);function n(){return Object(u.a)(this,n),e.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(j.jsx)(T,{})}}]),n}(o.a.Component),B=function(t){Object(h.a)(n,t);var e=Object(p.a)(n);function n(){return Object(u.a)(this,n),e.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(j.jsxs)(A.b,{history:I,children:[Object(j.jsx)(A.a,{path:"/",componet:_}),Object(j.jsx)(A.a,{path:"/todos",component:F})]})}}]),n}(o.a.Component);var W=function(){return Object(j.jsxs)("div",{className:"App",children:[Object(j.jsx)(B,{}),Object(j.jsx)(T,{})]})},P=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,62)).then((function(e){var n=e.getCLS,a=e.getFID,i=e.getFCP,s=e.getLCP,c=e.getTTFB;n(t),a(t),i(t),s(t),c(t)}))};n(60);function M(){return q.apply(this,arguments)}function q(){return(q=Object(s.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("react app bootstraped");case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function z(t){return J.apply(this,arguments)}function J(){return(J=Object(s.a)(i.a.mark((function t(e){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:d.a.render(Object(j.jsx)(W,{}),e.container?e.container.querySelector("#container-wrapper"):document.getElementById("root"));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function R(t){return U.apply(this,arguments)}function U(){return(U=Object(s.a)(i.a.mark((function t(e){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:d.a.unmountComponentAtNode(e.container?e.container.querySelector("#container-wrapper"):document.getElementById("root"));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function G(t){return K.apply(this,arguments)}function K(){return(K=Object(s.a)(i.a.mark((function t(e){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("update props",e);case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}d.a.render(Object(j.jsx)(o.a.StrictMode,{children:Object(j.jsx)(W,{})}),document.getElementById("root")),P()}},[[61,1,2]]])}));
//# sourceMappingURL=main.c507f297.chunk.js.map